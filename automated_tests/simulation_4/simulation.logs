sh run_simulation.sh
-e 2024-02-05T21:26:20 -------- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
-e 2024-02-05T21:26:20 -------- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
-e 2024-02-05T21:26:20 -------- Simulation 4
-e 2024-02-05T21:26:20 -------- Testing: Dead letter queue and alerting
-e 2024-02-05T21:26:20 -------- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
-e 2024-02-05T21:26:20 -------- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Cleaning up previous platform infrastructure components...
Deleting network
WARNING! This will remove all custom networks not used by at least one container.
Are you sure you want to continue? [y/N] Deleting containers
Deleting container: ac4f522c4084
ac4f522c4084
Deleting container: 9cc5c8f2641b
9cc5c8f2641b
Deleting container: 3f72364b6feb
3f72364b6feb
Deleting container: 0b2b59b697af
0b2b59b697af
Deleting container: 7227a01453f5
7227a01453f5
Deleting container: a9bc3e76242b
a9bc3e76242b
Deleting container: a4f39bc1cec4
a4f39bc1cec4
Deleting container: 85c467543052
85c467543052
Deleting container: f6ec56bfad2a
f6ec56bfad2a
Deleting container: 8113f4301f87
8113f4301f87
Deleting container: 4c92d8a9a345
4c92d8a9a345
Deleting container: f7649f8d9734
f7649f8d9734
Deleting container: 644d711946a9
644d711946a9
Deleting volumes
Deleting volume: 7fc1d40dc5e440761f22259826748e62992d7a1d475081af825d3ab79995d8fa
7fc1d40dc5e440761f22259826748e62992d7a1d475081af825d3ab79995d8fa
Deleting volume: d0f92b4ab2b4e876c2532a5c0ae774559e9c45cdb91280581a7dc177737466a7
d0f92b4ab2b4e876c2532a5c0ae774559e9c45cdb91280581a7dc177737466a7
Keeping volume: distributed-anonymization_elasticsearch-data
Keeping volume: distributed-anonymization_grafana-data
Deleting volume: e1aed6f8b7034e81e8125fc6227a76c1878cced3f8595ef88bcdcbd1cea68ecf
e1aed6f8b7034e81e8125fc6227a76c1878cced3f8595ef88bcdcbd1cea68ecf
Deleting volume: simulation_4_elasticsearch-data
simulation_4_elasticsearch-data
Deleting volume: simulation_4_grafana-data
simulation_4_grafana-data
Deleting volume: simulation_4_postgres-data
simulation_4_postgres-data
Deleting Spark checkpoint
OK: Finished clean up
-e 2024-02-05T21:26:25 -------- Deploying mandatory infrastructure components...
[+] Building 1.6s (22/22) FINISHED
 => [simulation_4-eureka-server internal] load build definition from Dockerfile                                                                                                                            0.0s
 => => transferring dockerfile: 32B                                                                                                                                                                        0.0s
 => [simulation_4-api-gateway internal] load build definition from Dockerfile                                                                                                                              0.0s
 => => transferring dockerfile: 32B                                                                                                                                                                        0.0s
 => [simulation_4-eureka-server internal] load .dockerignore                                                                                                                                               0.0s
 => => transferring context: 2B                                                                                                                                                                            0.0s
 => [simulation_4-api-gateway internal] load .dockerignore                                                                                                                                                 0.0s
 => => transferring context: 2B                                                                                                                                                                            0.0s
 => [simulation_4-api-gateway internal] load metadata for docker.io/library/openjdk:17-jdk-slim                                                                                                            0.0s
 => [simulation_4-api-gateway internal] load metadata for docker.io/library/maven:3.8.4-openjdk-17-slim                                                                                                    1.4s
 => [simulation_4-api-gateway stage-1 1/2] FROM docker.io/library/openjdk:17-jdk-slim                                                                                                                      0.0s
 => [simulation_4-eureka-server internal] load build context                                                                                                                                               0.0s
 => => transferring context: 891B                                                                                                                                                                          0.0s
 => [simulation_4-api-gateway build 1/6] FROM docker.io/library/maven:3.8.4-openjdk-17-slim@sha256:150deb7b386bad685dcf0c781b9b9023a25896087b637c069a50c8019cab86f8                                        0.0s
 => [simulation_4-api-gateway internal] load build context                                                                                                                                                 0.0s
 => => transferring context: 878B                                                                                                                                                                          0.0s
 => CACHED [simulation_4-eureka-server build 2/6] WORKDIR /app                                                                                                                                             0.0s
 => CACHED [simulation_4-api-gateway build 3/6] COPY pom.xml .                                                                                                                                             0.0s
 => CACHED [simulation_4-api-gateway build 4/6] RUN mvn dependency:go-offline                                                                                                                              0.0s
 => CACHED [simulation_4-api-gateway build 5/6] COPY src /app/src                                                                                                                                          0.0s
 => CACHED [simulation_4-api-gateway build 6/6] RUN mvn clean package -DskipTests -X                                                                                                                       0.0s
 => CACHED [simulation_4-api-gateway stage-1 2/2] COPY --from=build /app/target/*.jar app.jar                                                                                                              0.0s
 => CACHED [simulation_4-eureka-server build 3/6] COPY pom.xml .                                                                                                                                           0.0s
 => CACHED [simulation_4-eureka-server build 4/6] RUN mvn dependency:go-offline                                                                                                                            0.0s
 => CACHED [simulation_4-eureka-server build 5/6] COPY src /app/src                                                                                                                                        0.0s
 => CACHED [simulation_4-eureka-server build 6/6] RUN mvn clean package -DskipTests -X                                                                                                                     0.0s
 => CACHED [simulation_4-eureka-server stage-1 2/2] COPY --from=build /app/target/*.jar app.jar                                                                                                            0.0s
 => [simulation_4-eureka-server] exporting to image                                                                                                                                                        0.0s
 => => exporting layers                                                                                                                                                                                    0.0s
 => => writing image sha256:8f58e361462f3eb780ed8c7e6718249e442a2516a2284e62759a23e91dc91f2f                                                                                                               0.0s
 => => writing image sha256:9f8529d7d20c8047d6c3f839802a5db405400fabb5e5172fbae443d0e698b19b                                                                                                               0.0s
 => => naming to docker.io/library/simulation_4-api-gateway                                                                                                                                                0.0s
 => => naming to docker.io/library/simulation_4-eureka-server                                                                                                                                              0.0s
[+] Running 16/16
 ⠿ Volume "simulation_4_elasticsearch-data"    Created                                                                                                                                                     0.0s
 ⠿ Volume "simulation_4_postgres-data"         Created                                                                                                                                                     0.0s
 ⠿ Volume "simulation_4_grafana-data"          Created                                                                                                                                                     0.0s
 ⠿ Container prometheus                        Started                                                                                                                                                     1.5s
 ⠿ Container mongodb                           Started                                                                                                                                                     1.5s
 ⠿ Container simulation_4-eureka-server-1      Started                                                                                                                                                     0.6s
 ⠿ Container elasticsearch                     Started                                                                                                                                                     0.6s
 ⠿ Container simulation_4-api-gateway-1        Started                                                                                                                                                     1.1s
 ⠿ Container grafana                           Started                                                                                                                                                     1.6s
 ⠿ Container simulation_4-postgres-1           Started                                                                                                                                                     1.6s
 ⠿ Container simulation_4-blueprint-service-1  Started                                                                                                                                                     0.9s
 ⠿ Container zookeeper                         Started                                                                                                                                                     1.5s
 ⠿ Container kafka                             Started                                                                                                                                                     1.8s
 ⠿ Container logstash                          Started                                                                                                                                                     1.6s
 ⠿ Container kibana                            Started                                                                                                                                                     1.6s
 ⠿ Container kafka-ui                          Started                                                                                                                                                     2.1s
-e 2024-02-05T21:26:29 -------- Waiting 30 seconds for infrastructure to settle...
-e 2024-02-05T21:26:59 -------- Starting importing process...
-e 2024-02-05T21:27:00 -------- Received HTTP status 503. Retrying in 10 seconds... (Attempt 1/30)
-e 2024-02-05T21:27:10 -------- Received HTTP status 503. Retrying in 10 seconds... (Attempt 2/30)
-e 2024-02-05T21:27:20 -------- OK: Importing process started successfully --- blueprint ID: 995b5539-4196-4cb4-8e1b-3c0731e75bdc
-e 2024-02-05T21:27:20 -------- Waiting 15 seconds: letting the importing process complete
-e 2024-02-05T21:27:35 -------- Importing process should throw runtime exception and publish to a dead letter queue...
-e 2024-02-05T21:27:35 -------- OK: Importing process successfully started
-e 2024-02-05T21:28:05 -------- OK: Simulation 4 finished successfully
-e 2024-02-05T21:28:05 -------- Tested: Dead letter queue and alerting!
-e 2024-02-05T21:28:05 -------- Check services.logs for the existence of published message to a dead letter queue